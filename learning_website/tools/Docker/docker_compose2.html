<html><h2><u><center>Docker compose</center></u>
<h4><pre>Docker compose is a tool built by docker to ease the task to creating and configring multiple containers in a development environment, counter-part of docker-compose for 
production environment is Docker Swarm. Docker compose takes as input a YAML configuration file and creates the resources (image, containers, networks, volumes etc) by 
communicating with the docker daemon through docker API.

<h3><u>Docker compose commands -</u></h3>
<u>1. Version :-</u> It shows the docker-compose version information.

example -> docker-compose version

Note: docker-py is the Docker Remote API, it does everything the docker command does, but from within Python - run containers, manage them, pull/push images, etc. 

<u>2. Help :-</u> It list out all the subcommands that can be used with docker-compose. Even you can try -help or -h.

example -> docker-compose help 
		-> docker-compose build help 

<u>3. Config :-</u> It validate the docker-compose file and view the compose file.

example -> docker-compose config

<u>4. Build :-</u> It used to create a new image using the instructions in the Dockerfile. The build can be specified either as a string containing a path to the build context.
                   The newly built image will be used to create the container for the service. [M]
				   
example -> docker-compose build
	-> docker-compose build [options] [SERVICE..]


Note: You can rebuild the service at any time by running the docker-compose build in the project directory.
Options include:

--force-rm => removes the temporary container during the build process.
--no-cache => does not use cache during the build images process (this will legthen the build process)
--pull always => tries to get a mirror of the updated version by --pull. 

<u>5. PULL :-</u> This command will pull down the images which is specified under each service of docker-compose file from the docker hub.

example -> docker-compose pull [pulling all the images]
	-> docker-compose pull service_name [pull only specified service name image]

<u>6. PUSH :-</u> This command helps you to push the service images to Docker Hub or you own private docker registry.
             
example -> docker-compose push

Note: 1. Make sure that image name should be username/repository.
      2. Before trying to push the image log in to Dockerhub (docker login -u)

<u>7. UP :-</u> It helps you to bring up a multi-container application, which you have desctibed in your docker-compose file. 

example -> docker-compose up --no-start [To build container and network but won't start the container]
           docker-compose ps {to check the status]
	   docker-compose up -d [to build the images and bringup the containers, -d option which will run the container in background]
	   docker-compose up -d --build [rebuild the docker image and bring the stack up]
		   
<u>8. Images:-</u> It helps to listout images used/created by the containers.

Example -> docker-compose images

<u>9. ps:-</u> This command will list out the containers details like status, port mapping etc., which is declared in docker-compose file.

Example -> docker-compose ps [ for checking container status]
	-> docker-compose ps --services [for listing out services]
		
<u>10. Stop :-</u> It helps us to stop containers in service.

Example -> docker-compose stop [for stoping all the services]
	-> docker-compose stop webserver [stoping a single service]
		
<u>11. Start:-</u> It helps to start containers of a service.

Example -> docker-compose start
	-> docker-compose start webserver
Note: You can't directly bring up/ start containers using docker-compose start.

<u>12. Restart:-</u> It helps us to restart the services. 

Example -> docker-compose restart
	-> docker-compose restart service_name

<u>13. Pause:-</u> It helps to pause services.

Example -> docker-compose pause
	-> docker-compose pause service_name

<u>14. Unpause:-</u> It helps to unpauses paused containers of service.

Example -> docker-compose unpause
	-> docker-compose unpause service_name
		
<u>15. Logs:-</u> It helps to see the service logs.

Example -> docker-compose logs
	-> docker-compose logs -f service_name [to check the live logs of the service running in container]
	-> docker-compose logs --tail="2" service_name [checking last two line logs for a service]

<u>16. Port:-</u> This command print the public/netowrk facing port of a service.

Example -> docker-compose port service_name port_in_container

<u>17. Run:-</u> Run command help to run a one-time command against a service. Docker-compose run will start a new container to execute a command,
not executed against a running container.

Example -> docker-compose run service_name /bin/bash

<u>18. Scale:-</u> The docker-compose scale service_name = no. of instances sets the number of containers to run for a service.

-> docker-compose scale service_name=3

Note: 1. The scale command is deprecated, instead use the up command with the -scale flag. 
Example -> docker-compose up --scale service_name = no of instances

2. Host machine can only bind an unallocated port to the container, so trying scale service which is monted to host will fail.
3. Don't mention the name while scaling up as all the containers can't have the same name. 

<u>19. Exec:-</u> Docker exec is used to run commands in a running container, similarly docker-compose exec runs commands in your services.

docker-compose exec service_name/bin/bash

<u>20. Kill:-</u> The kill command kill all the container started by the docker-compose.

Example: -> docker-compose kill

<u>21. Rm:-</u> It helps to remove stopped containers.

Example -> docker-compose rm
	-> docker-compose rm -fs service_name [ -f, -force to skip asking confirmation to remove container, even it can remove the running container]
		
Note: By default, anonymous volumes attached to containers are not removed. You can override this with -v.

<u>22. Down:-</u> It helps to stop and remove containers, network, images and volumes.

Example -> docker-compose down [stop and remove containers and network. Image and volume is still present.]
	-> docker-compose down --rmi (all|local) [Stop the container and remove container, network and image. Volume still present] 
						 (where 'all' removes all images used by any service & 'local' remove only images
				                that don't have a custom tag set by the image field)
	-> docker-compose down --volumes [Stop the container and remove container, netowrk and volume. Image still present.]										 
	-> docker-compose down --volumes --rmi all [Stop and remove containers, networks, volumes and images]									
</h4></pre></h2></html>